<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Condo Board Financial Report - 2018-2026</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --accent: #667eea;
            --accent-secondary: #764ba2;
            --text: #333;
            --text-light: #666;
            --bg-light: #f8f9fa;
            --card-bg: #fff;
            --border: #ddd;
            --gap: clamp(10px, 1.5vw, 15px);
            --padding: clamp(12px, 2vw, 20px);
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-gradient);
            min-height: 100vh;
            padding: clamp(8px, 1vw, 15px);
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--card-bg);
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .header {
            background: var(--bg-gradient);
            color: white;
            padding: clamp(15px, 2vw, 25px);
            text-align: center;
        }
        
        .header h1 {
            font-size: clamp(1.4em, 3vw, 2em);
            margin-bottom: 5px;
        }
        
        .header p {
            font-size: clamp(0.85em, 1.5vw, 0.95em);
            opacity: 0.9;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: var(--text-light);
        }
        
        .spinner {
            border: 4px solid var(--bg-light);
            border-top: 4px solid var(--accent);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
            padding: 15px;
            border-radius: 4px;
            margin: 20px;
        }
        
        .summary-section {
            background: var(--bg-light);
            padding: var(--padding);
            border-top: 1px solid var(--border);
        }
        
        .summary-section h2 {
            color: var(--accent);
            margin-bottom: var(--gap);
            font-size: clamp(1.2em, 3vw, 1.5em);
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--gap);
        }
        
        .summary-card {
            background: var(--card-bg);
            border-left: 4px solid var(--accent);
            padding: clamp(8px, 1.5vw, 15px);
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        }
        
        .summary-card h3 {
            color: var(--accent);
            font-size: clamp(0.7em, 0.9vw, 0.8em);
            font-weight: 600;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .summary-card .value {
            font-size: clamp(1em, 2vw, 1.3em);
            font-weight: 700;
            color: var(--text);
        }
        
        .summary-card .change {
            font-size: 0.75em;
            margin-top: 3px;
            color: var(--text-light);
        }
        
        .positive {
            color: #28a745;
        }
        
        .negative {
            color: #dc3545;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--gap);
            padding: var(--padding);
        }
        
        .chart-container {
            background: var(--bg-light);
            border-radius: 8px;
            padding: var(--padding);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }
        
        .chart-title {
            font-size: clamp(0.8em, 1.5vw, 0.95em);
            font-weight: 600;
            color: var(--text);
            margin-bottom: 10px;
            text-align: center;
        }
        
        .chart-wrapper {
            flex: 1;
            position: relative;
            min-height: 180px;
        }
        
        canvas {
            max-height: 200px;
        }
        
        @media (max-width: 1024px) {
            .charts-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .summary-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .summary-grid {
                grid-template-columns: 1fr;
            }
            
            body {
                padding: var(--padding);
            }
        }
        
        footer {
            background: var(--bg-light);
            padding: var(--padding);
            text-align: center;
            color: var(--text-light);
            font-size: 0.9em;
            border-top: 1px solid var(--border);
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“Š Condo Board Financial Report</h1>
            <p>9-Year Financial Analysis (2018-2026)</p>
        </div>
        
        <div class="summary-section">
            <h2>ðŸ“ˆ Key Metrics</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>2026 Maintenance Fee</h3>
                    <div class="value">$1.10/sqft</div>
                    <div class="change"><span class="positive">+5.77%</span> vs 2025</div>
                </div>
                <div class="summary-card">
                    <h3>2026 Common Expenses</h3>
                    <div class="value">$2,834,060</div>
                    <div class="change"><span class="positive">+5.82%</span> vs 2025</div>
                </div>
                <div class="summary-card">
                    <h3>2026 Reserve Fund Contribution</h3>
                    <div class="value">$1,017,956</div>
                    <div class="change"><span class="positive">+8.25%</span> vs 2025</div>
                </div>
                <div class="summary-card">
                    <h3>9-Year Growth (2018-2026)</h3>
                    <div class="value">+92.98%</div>
                    <div class="change">Maintenance Fee Growth</div>
                </div>
                <div class="summary-card">
                    <h3>Average Annual Increase</h3>
                    <div class="value">+6.50%</div>
                    <div class="change">Historical Average</div>
                </div>
                <div class="summary-card">
                    <h3>Latest Reserve Balance</h3>
                    <div class="value">$5,452,053</div>
                    <div class="change">Fund Status: Strong</div>
                </div>
            </div>
        </div>
        
        <div class="charts-grid">
            <div class="chart-container">
                <div class="chart-title">Maintenance Fee YoY Growth %</div>
                <div class="chart-wrapper"><canvas id="growthChart"></canvas></div>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Maintenance Fee per sqft Trend</div>
                <div class="chart-wrapper"><canvas id="maintenanceChart"></canvas></div>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Reserve Fund Balance</div>
                <div class="chart-wrapper"><canvas id="balanceChart"></canvas></div>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Year-over-Year Comparison (%)</div>
                <div class="chart-wrapper"><canvas id="yoyComparisonChart"></canvas></div>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Financial Overview</div>
                <div class="chart-wrapper"><canvas id="overviewChart"></canvas></div>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">Budget Allocation</div>
                <div class="chart-wrapper"><canvas id="budgetChart"></canvas></div>
            </div>
        </div>
        
        <footer>
            <p>Condo Board Financial Report | Report Date: <span id="reportDate"></span></p>
        </footer>
    </div>
    
    <script>
        // Hard-coded data directly from Budget Cal.csv
        const years = ['2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025', '2026'];
        const maintenanceFee = [0.57, 0.67, 0.75, 0.85, 0.88, 0.94, 1.00, 1.04, 1.10];
        const commonExpense = [1452367, 1731290, 1923613, 2193695, 2250070, 2405327, 2575619, 2677616, 2834060];
        const reserveFund = [178361, 297888, 497472, 830780, 843227, 855875, 868714, 940375, 1017956];
        const expenditures = [1232280, 1396077, 1500113, 1448719, 1449710, 1620372, 1732463, 1769516, 1849179];
        const balanceData = [null, null, null, null, null, 3464890, 4412465, 5452053, null];
        
        // YoY percentage data (from CSV rows 9-11) - reversed to match chronological order
        const yoyYears = ['2019', '2020', '2021', '2022', '2023', '2024', '2025', '2026'];
        const commonExpenseYoY = [19.20, 11.11, 14.04, 2.57, 6.90, 7.08, 3.96, 5.84];
        const reserveFundYoY = [67.01, 67.00, 67.00, 1.50, 1.50, 1.50, 8.25, 8.25];
        const expendituresYoY = [13.29, 7.45, -3.43, 0.07, 11.77, 6.92, 2.14, 4.50];
        
        const primaryColor = 'rgb(102, 126, 234)';
        const successColor = 'rgb(40, 167, 69)';
        const dangerColor = 'rgb(220, 53, 69)';
        const warningColor = 'rgb(255, 127, 14)';
        
        // Set report date
        document.getElementById('reportDate').textContent = new Date().toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'long',
            day: 'numeric'
        });
        
        // Chart 1: Maintenance Fee Trend
        new Chart(document.getElementById('maintenanceChart'), {
            type: 'line',
            data: {
                labels: years,
                datasets: [{
                    label: 'Maintenance Fee ($/sqft)',
                    data: maintenanceFee,
                    borderColor: '#0066cc',
                    backgroundColor: 'rgba(0, 102, 204, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 5,
                    pointBackgroundColor: '#0066cc',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return '$' + context.parsed.y.toFixed(2);
                            }
                        }
                    }
                },
                scales: {
                    y: { beginAtZero: false, ticks: { callback: v => '$' + v.toFixed(2) } }
                }
            }
        });
        
        // Chart 2: Year-over-Year Comparison
        new Chart(document.getElementById('yoyComparisonChart'), {
            type: 'line',
            data: {
                labels: yoyYears,
                datasets: [
                    {
                        label: 'Common Expense',
                        data: commonExpenseYoY,
                        borderColor: '#0066cc',
                        backgroundColor: 'rgba(0, 102, 204, 0.1)',
                        borderWidth: 2.5,
                        tension: 0.4,
                        pointRadius: 4,
                        fill: false
                    },
                    {
                        label: 'Reserve Fund',
                        data: reserveFundYoY,
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        borderWidth: 2.5,
                        tension: 0.4,
                        pointRadius: 4,
                        fill: false
                    },
                    {
                        label: 'Expenditures',
                        data: expendituresYoY,
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.1)',
                        borderWidth: 2.5,
                        tension: 0.4,
                        pointRadius: 4,
                        fill: false
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { 
                        position: 'bottom',
                        labels: { font: { size: 11 }, padding: 8, boxWidth: 12 }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y.toFixed(2) + '%';
                            }
                        }
                    }
                },
                scales: {
                    y: { 
                        ticks: { callback: v => v.toFixed(1) + '%' }
                    }
                }
            }
        });
        
        // Chart 3: Budget Allocation
        new Chart(document.getElementById('budgetChart'), {
            type: 'bar',
            data: {
                labels: years,
                datasets: [
                    {
                        label: 'To Reserve Fund',
                        data: reserveFund,
                        backgroundColor: '#28a745',
                        borderColor: 'rgba(0,0,0,0.1)',
                        borderWidth: 1
                    },
                    {
                        label: 'To Total Expenditures',
                        data: expenditures,
                        backgroundColor: '#dc3545',
                        borderColor: 'rgba(0,0,0,0.1)',
                        borderWidth: 1
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { 
                        position: 'bottom',
                        labels: { font: { size: 11 }, padding: 8, boxWidth: 12 }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': $' + (context.parsed.y/1e6).toFixed(1) + 'M';
                            }
                        }
                    }
                },
                scales: {
                    y: { ticks: { callback: v => '$' + (v/1e6).toFixed(1) + 'M' } }
                }
            }
        });
        
        // Chart 4: Financial Overview
        new Chart(document.getElementById('overviewChart'), {
            type: 'line',
            data: {
                labels: years,
                datasets: [
                    {
                        label: 'Common Expense',
                        data: commonExpense.map(v => v/1e6),
                        borderColor: '#0066cc',
                        backgroundColor: 'rgba(0, 102, 204, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4
                    },
                    {
                        label: 'Reserve Fund',
                        data: reserveFund.map(v => v/1e6),
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4
                    },
                    {
                        label: 'Expenditures',
                        data: expenditures.map(v => v/1e6),
                        borderColor: '#dc3545',
                        backgroundColor: 'rgba(220, 53, 69, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: false,
                        pointRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { 
                        position: 'bottom',
                        labels: { font: { size: 11 }, padding: 8, boxWidth: 12 }
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': $' + context.parsed.y.toFixed(1) + 'M';
                            }
                        }
                    }
                },
                scales: {
                    y: { ticks: { callback: v => '$' + v.toFixed(1) + 'M' } }
                }
            }
        });
        
        // Chart 5: YoY Growth
        const yoyGrowth = [];
        for (let i = 1; i < maintenanceFee.length; i++) {
            const growth = ((maintenanceFee[i] - maintenanceFee[i-1]) / maintenanceFee[i-1]) * 100;
            yoyGrowth.push(growth);
        }
        
        new Chart(document.getElementById('growthChart'), {
            type: 'line',
            data: {
                labels: years.slice(1),
                datasets: [{
                    label: 'Maintenance Fee YoY Growth %',
                    data: yoyGrowth,
                    borderColor: '#0066cc',
                    backgroundColor: 'rgba(0, 102, 204, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 5,
                    pointBackgroundColor: '#0066cc',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { 
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.dataset.label + ': ' + context.parsed.y.toFixed(2) + '%';
                            }
                        }
                    }
                },
                scales: {
                    y: { ticks: { callback: v => v.toFixed(1) + '%' } }
                }
            }
        });
        
        // Chart 6: Reserve Balance
        const balanceDataClean = balanceData.filter(v => v !== null);
        const balanceYears = ['2023', '2024', '2025'];
        
        new Chart(document.getElementById('balanceChart'), {
            type: 'bar',
            data: {
                labels: balanceYears,
                datasets: [{
                    label: 'Reserve Fund Balance ($)',
                    data: balanceDataClean,
                    backgroundColor: '#1a5f2f',
                    borderColor: '#1a5f2f',
                    borderWidth: 0,
                    barThickness: 20
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: { display: false },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return '$' + context.parsed.y.toLocaleString('en-US', {maximumFractionDigits: 0});
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        ticks: { callback: v => '$' + (v/1e6).toFixed(1) + 'M' }
                    }
                }
            }
        });
    </script>
</body>
</html>
